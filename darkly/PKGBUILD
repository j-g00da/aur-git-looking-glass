# Maintainer: DeltaCopy <7x0bb03yq@mozmail.com>
# Description: Builds Darkly from https://github.com/Bali10050/Darkly
# Autogenerated from https://github.com/DeltaCopy/darkly-aur-ci

# basic info
pkgname="darkly"
_gitname="Darkly"
pkgver=0.5.29
pkgrel=1
pkgdesc="Fork of Lightly (A modern style for Qt applications)"
url="https://github.com/Bali10050/darkly"
arch=('x86_64' 'aarch64')
license=("GPL-2.0-or-later")
build_dir="build_kf6"

makedepends=(
  'cmake'
  'extra-cmake-modules'
)

options=(!emptydirs)

source=(
    "${url}/archive/refs/tags/v${pkgver}.tar.gz"
)

sha256sums=(
  'e1fd9e81743a6b80e6507d1469b486b4b0736fc6c62c5e2eb93540fa5a57c1ff'
)

# KF6/Qt6
depends_kf6=(
  'kdecoration'
  'qt6-declarative'
  'kcoreaddons'
  'kcmutils'
  'kcolorscheme'
  'kconfig'
  'kguiaddons'
  'kiconthemes'
  'kwindowsystem'
  'frameworkintegration'
  'libplasma'
)

# KF5/QT5 for backward compatibility
depends_kf5=(
    'kcmutils5'
    'frameworkintegration5'
    'kconfigwidgets5'
    'kiconthemes5'
    'kirigami2'
    'kwindowsystem5'
)

depends=("${depends_kf6[@]}" "${depends_kf5[@]}")

build() (
  local cmake_options=(
    -B $build_dir
    -S "$_gitname-${pkgver}"
    -DBUILD_TESTING=OFF
    -Wno-dev
  )

  cmake "${cmake_options[@]}"
  cmake --build $build_dir
)

package() (
  DESTDIR="$pkgdir" cmake --install $build_dir
  rm -rf "$pkgdir/usr/lib/cmake"
)
