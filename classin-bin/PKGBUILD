# Maintainer: cyqsimon <28627918+cyqsimon@users.noreply.github.com>

# Generated by debtap then manually modified
pkgname=classin-bin
_pkgname=classin
pkgver=6.0.4.3227
pkgrel=1
pkgdesc="Proprietary remote classroom application by EEO."
arch=('x86_64')
url="https://www.eeo.cn/cn/classin"
license=('unknown')
depends=('alsa-lib')
options=('!strip' '!emptydirs')
install=${pkgname}.install
source_x86_64=("${_pkgname}-${pkgver}.deb::https://www.eeo.cn/download/client/${_pkgname}_${pkgver}_amd64.deb")
sha512sums_x86_64=('c7bddbe7abbb235f1b8c1732c133e9aa46797f16b54334f48e596e0caa92bd7e59aa4682edd93ccc741b72a2863be5c45c2d2e641a1155d1188972a6b47e6acb')

package(){
  tar -xJ --no-same-owner -f data.tar.xz -C "${pkgdir}"

  # HACK: Debian compatibility symlink
  # ClassIn binary links several files in /usr/lib/x86_64-linux-gnu, which is
  # invalid on Arch. I tried examining the binary using `patchelf`, `ldd`, and
  # `strings`, but couldn't figure out how it's linked. In lieu of a proper fix,
  # this makeshift solution will do for now.
  mkdir -p "${pkgdir}/usr/lib"
  ln -sf /usr/lib "${pkgdir}/usr/lib/x86_64-linux-gnu"
}
