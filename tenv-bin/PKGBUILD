# This file was generated by GoReleaser. DO NOT EDIT.
# Maintainer: Alexander Sharov <kvendingoldo@gmail.com>
# Maintainer: chaseme <aur@chase.ninja>
# Contributor: Alexander Sharov <kvendingoldo@gmail.com>
# Contributor: chaseme <aur@chase.ninja>

pkgname='tenv-bin'
pkgver=4.8.3
pkgrel=1
pkgdesc='OpenTofu, Terraform, Terragrunt, Terramate and Atmos version manager, written in Go'
url='https://tofuutils.github.io/tenv/'
arch=('aarch64' 'i686' 'x86_64')
license=('Apache-2.0')
provides=('atmos' 'tenv' 'terraform' 'terragrunt' 'terramate' 'tf' 'tofu')
conflicts=('atmos' 'atmos-bin' 'opentofu' 'opentofu-bin' 'opentofu-bin-stable' 'opentofu-git' 'terraform' 'terragrunt' 'terramate' 'tfenv' 'tgenv' 'tofuenv')
optdepends=('cosign: package validation for OpenTofu')

source_aarch64=("${pkgname}_${pkgver}_aarch64.tar.gz::https://github.com/tofuutils/tenv/releases/download/v4.8.3/tenv_v4.8.3_Linux_arm64.tar.gz")
sha256sums_aarch64=('1fade16637ceb8d96d550b4813c83c57bf33c53ee11bbe1d0bedf8f627a4359c')

source_i686=("${pkgname}_${pkgver}_i686.tar.gz::https://github.com/tofuutils/tenv/releases/download/v4.8.3/tenv_v4.8.3_Linux_i386.tar.gz")
sha256sums_i686=('c783f947e556f1333d9d7fc3e9476133abf974cea4f56b1f502c59ef334f6dd5')

source_x86_64=("${pkgname}_${pkgver}_x86_64.tar.gz::https://github.com/tofuutils/tenv/releases/download/v4.8.3/tenv_v4.8.3_Linux_x86_64.tar.gz")
sha256sums_x86_64=('03df4fff5b72ac00e0c7bc9c97455c3535cf527a5259458d3d4b69624653339b')

package() {
  # bin
  install -Dm 0755 "atmos" "${pkgdir}/usr/bin/atmos"
  install -Dm 0755 "tenv" "${pkgdir}/usr/bin/tenv"
  install -Dm 0755 "terraform" "${pkgdir}/usr/bin/terraform"
  install -Dm 0755 "terragrunt" "${pkgdir}/usr/bin/terragrunt"
  install -Dm 0755 "terramate" "${pkgdir}/usr/bin/terramate"
  install -Dm 0755 "tf" "${pkgdir}/usr/bin/tf"
  install -Dm 0755 "tofu" "${pkgdir}/usr/bin/tofu"

  # license
  install -Dm 0644 "LICENSE" "${pkgdir}/usr/share/licenses/tenv/LICENSE"
  install -Dm 0644 "LICENSE" "${pkgdir}/usr/share/doc/tenv/LICENSE"

  # readme
  install -Dm 0644 "README.md" "${pkgdir}/usr/share/doc/tenv/README.md"

  # completions
  mkdir -p "${pkgdir}/usr/share/bash-completion/completions/"
  mkdir -p "${pkgdir}/usr/share/zsh/site-functions/"
  mkdir -p "${pkgdir}/usr/share/fish/vendor_completions.d/"

  for i in bash fish zsh; do
  ./tenv completion $i > ./tenv.$i
  done

  install -Dm644 "./tenv.bash" "${pkgdir}/usr/share/bash-completion/completions/tenv"
  install -Dm644 "./tenv.zsh" "${pkgdir}/usr/share/zsh/site-functions/tenv"
  install -Dm644 "./tenv.fish" "${pkgdir}/usr/share/fish/vendor_completions.d/tenv.fish"
}
