# This file was generated by GoReleaser. DO NOT EDIT.
# Maintainer: Alexander Sharov <kvendingoldo@gmail.com>
# Maintainer: chaseme <aur@chase.ninja>
# Contributor: Alexander Sharov <kvendingoldo@gmail.com>
# Contributor: chaseme <aur@chase.ninja>

pkgname='tenv-bin'
pkgver=4.7.21
pkgrel=1
pkgdesc='OpenTofu, Terraform, Terragrunt, Terramate and Atmos version manager, written in Go'
url='https://tofuutils.github.io/tenv/'
arch=('aarch64' 'i686' 'x86_64')
license=('Apache-2.0')
provides=('atmos' 'tenv' 'terraform' 'terragrunt' 'terramate' 'tf' 'tofu')
conflicts=('atmos' 'atmos-bin' 'opentofu' 'opentofu-bin' 'opentofu-bin-stable' 'opentofu-git' 'terraform' 'terragrunt' 'terramate' 'tfenv' 'tgenv' 'tofuenv')
optdepends=('cosign: package validation for OpenTofu')

source_aarch64=("${pkgname}_${pkgver}_aarch64.tar.gz::https://github.com/tofuutils/tenv/releases/download/v4.7.21/tenv_v4.7.21_Linux_arm64.tar.gz")
sha256sums_aarch64=('49ee0e8be761f4a7fb1ac8920247023cc7716864550b85c544710a379be09aa6')

source_i686=("${pkgname}_${pkgver}_i686.tar.gz::https://github.com/tofuutils/tenv/releases/download/v4.7.21/tenv_v4.7.21_Linux_i386.tar.gz")
sha256sums_i686=('c7726a8d2c82cf03709a8b09f725693587b053bad6b36e2d0f2af8c8f3e73c5d')

source_x86_64=("${pkgname}_${pkgver}_x86_64.tar.gz::https://github.com/tofuutils/tenv/releases/download/v4.7.21/tenv_v4.7.21_Linux_x86_64.tar.gz")
sha256sums_x86_64=('9fad45e8d09c77aab6a0670401cedc7eaf04cf48bcdfeb104cc8972790975905')

package() {
  # bin
  install -Dm 0755 "atmos" "${pkgdir}/usr/bin/atmos"
  install -Dm 0755 "tenv" "${pkgdir}/usr/bin/tenv"
  install -Dm 0755 "terraform" "${pkgdir}/usr/bin/terraform"
  install -Dm 0755 "terragrunt" "${pkgdir}/usr/bin/terragrunt"
  install -Dm 0755 "terragrunt" "${pkgdir}/usr/bin/terramate"
  install -Dm 0755 "tf" "${pkgdir}/usr/bin/tf"
  install -Dm 0755 "tofu" "${pkgdir}/usr/bin/tofu"

  # license
  install -Dm 0644 "LICENSE" "${pkgdir}/usr/share/licenses/tenv/LICENSE"
  install -Dm 0644 "LICENSE" "${pkgdir}/usr/share/doc/tenv/LICENSE"

  # readme
  install -Dm 0644 "README.md" "${pkgdir}/usr/share/doc/tenv/README.md"

  # completions
  mkdir -p "${pkgdir}/usr/share/bash-completion/completions/"
  mkdir -p "${pkgdir}/usr/share/zsh/site-functions/"
  mkdir -p "${pkgdir}/usr/share/fish/vendor_completions.d/"

  for i in bash fish zsh; do
  ./tenv completion $i > ./tenv.$i
  done

  install -Dm644 "./tenv.bash" "${pkgdir}/usr/share/bash-completion/completions/tenv"
  install -Dm644 "./tenv.zsh" "${pkgdir}/usr/share/zsh/site-functions/tenv"
  install -Dm644 "./tenv.fish" "${pkgdir}/usr/share/fish/vendor_completions.d/tenv.fish"
}
