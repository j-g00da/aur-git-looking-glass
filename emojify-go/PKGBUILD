# This file was generated by GoReleaser. DO NOT EDIT.
# Maintainer: Damien Butt <22627489+damienbutt@users.noreply.github.com>

pkgname='emojify-go'
pkgver=1.0.1
pkgrel=1
pkgdesc='Lighting fast Emoji conversion on the command line ðŸ˜±'
url='https://github.com/damienbutt/emojify-go'
arch=('aarch64' 'x86_64')
license=('MIT')
provides=('emojify')
conflicts=('emojify')
makedepends=('go' 'git')
source=("${pkgname}_${pkgver}.tar.gz::https://github.com/damienbutt/emojify-go/releases/download/v1.0.1/emojify-go-1.0.1.tar.gz")
sha256sums=('f407e61fb4b03ec1cfd3c56eda1632d17d2172460d20069cbc24c522ca69a221')
prepare() {
  cd "$srcdir"

  # Download dependencies
  go mod download
}
build() {
  cd "$srcdir"

  # Build the binary with proper flags
  export CGO_ENABLED=0

  go build \
  -ldflags="-s -w -X github.com/damienbutt/emojify-go/internal/version.Version=1.0.1 \
  -X github.com/damienbutt/emojify-go/internal/version.Commit=85fcc38f43205b392ad511c757be1a7f96b16bb0 \
  -X github.com/damienbutt/emojify-go/internal/version.Date=2025-08-28T21:21:08Z \
  -X github.com/damienbutt/emojify-go/internal/version.BuiltBy=makepkg" \
  -trimpath \
  -gcflags="all=-l" \
  -o emojify \
  ./cmd/emojify
}
package() {
  cd "$srcdir"

  # Install binary
  install -Dm755 emojify "${pkgdir}/usr/bin/emojify"

  # Install license
  install -Dm644 LICENSE "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"

  # Install documentation
  install -Dm644 README.md "${pkgdir}/usr/share/doc/${pkgname}/README.md"
  install -Dm644 man/emojify.1 "${pkgdir}/usr/share/man/man1/emojify.1"
}
