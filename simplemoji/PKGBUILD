# Maintainer: Sergio Ribera <contact@sergioribera.rs>
#
# This PKGBUILD was generated by `cargo aur`: https://crates.io/crates/cargo-aur

pkgname=simplemoji
pkgver=1.2.0
pkgrel=1
pkgdesc="Fast Application for look your amazing emojis write in Rust"
url="https://github.com/SergioRibera/Simplemoji"
license=("MIT OR Apache-2.0")
arch=("x86_64")
provides=("simplemoji")
conflicts=("simplemoji")
depends=("noto-fonts-emoji" "noto-fonts")
source=("https://github.com/SergioRibera/Simplemoji/releases/download/v1.2.0/simplemoji-x86_64-unknown-linux-gnu.tar.xz")
sha256sums=('d47733a43e578c27b2ab9aadf4dec6cd01580dba085feb635a0dc71389f0ef5a')

package() {
    find . -name 'simplemoji' -type f -executable -exec install -Dm755 {} -t "$pkgdir/usr/bin" \;
    mkdir -p "$pkgdir/usr/share/licenses/$pkgname"

    # InstalaciÃ³n opcional de licencias
    if [[ -d "$srcdir" ]]; then
        mkdir -p "$pkgdir/usr/share/licenses/$pkgname"
        pushd "$srcdir" >/dev/null
        if [[ -f "LICENSE-APACHE" && -s "LICENSE-APACHE" ]]; then
            install -Dm644 "LICENSE-APACHE" "$pkgdir/usr/share/licenses/$pkgname/LICENSE-APACHE"
        else
            echo "Warning: License file 'LICENSE-APACHE' missing or empty - skipping" >&2
        fi
        if [[ -f "LICENSE-MIT" && -s "LICENSE-MIT" ]]; then
            install -Dm644 "LICENSE-MIT" "$pkgdir/usr/share/licenses/$pkgname/LICENSE-MIT"
        else
            echo "Warning: License file 'LICENSE-MIT' missing or empty - skipping" >&2
        fi
        popd >/dev/null
    else
        echo "Warning: No license files found in $srcdir" >&2
    fi
}
