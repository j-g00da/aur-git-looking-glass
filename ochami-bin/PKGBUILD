# This file was generated by GoReleaser. DO NOT EDIT.
# Maintainer: Devon T. Bautista <devonb@lanl.gov>

pkgname='ochami-bin'
pkgver=0.6.0
pkgrel=1
pkgdesc='Command line interface for OpenCHAMI services'
url='https://github.com/OpenCHAMI/ochami'
arch=('aarch64' 'x86_64')
license=('MIT')
provides=('ochami')
conflicts=('ochami-git')
optdepends=('bash-completion: for bash completion support' 'jq: for pretty-printing JSON' 'zsh-completions: for zsh completion support')
backup=('etc/ochami/config.yaml')

source_aarch64=("${pkgname}_${pkgver}_aarch64.tar.gz::https://github.com/OpenCHAMI/ochami/releases/download/v0.6.0/ochami_Linux_arm64.tar.gz")
sha256sums_aarch64=('ef7f6fd4710df7e6617d724c18e68bd8de4a4b30049d086149edcbebd07ba41e')

source_x86_64=("${pkgname}_${pkgver}_x86_64.tar.gz::https://github.com/OpenCHAMI/ochami/releases/download/v0.6.0/ochami_Linux_x86_64.tar.gz")
sha256sums_x86_64=('21d95428e4112ff0bd33c35f68dbc20bba2b55e58e76fc46fcc5fdc8ee7d27a6')

package() {
  # Binary
  install -Dm755 "./ochami" "${pkgdir}/usr/bin/ochami"

  # License
  install -Dm644 "./LICENSE" "${pkgdir}/usr/share/licenses/ochami/LICENSE"

  # Completions
  install -Dm644 "./completions/ochami.bash" "${pkgdir}/usr/share/bash-completion/completions/ochami"
  install -Dm644 "./completions/ochami.fish" "${pkgdir}/usr/share/fish/vendor_completions.d/ochami.fish"
  install -Dm644 "./completions/ochami.zsh" "${pkgdir}/usr/share/zsh/site-functions/_ochami"

  # Config
  install -Dm644 "./doc/config.example.yaml" "${pkgdir}/usr/share/doc/ochami/config.example.yaml"

  # Man pages
  mkdir -p "${pkgdir}/usr/share/man/man1"
  mkdir -p "${pkgdir}/usr/share/man/man5"
  install -Dm644 ./man/*.1 "${pkgdir}/usr/share/man/man1/"
  install -Dm644 ./man/*.5 "${pkgdir}/usr/share/man/man5/"

  # Extras
  install -Dm755 "./extras/scripts/ochami-discovery-old2new.py" "${pkgdir}/usr/libexec/ochami/ochami-discovery-old2new.py"
}
