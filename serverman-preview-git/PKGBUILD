# Maintainer: Noah Jelen <noahtjelen@gmail.com>
# Generated by cargo on January 15, 2022 at 02:35:21
pkgname=serverman-preview-git
pkgver=e90972095919d452ebe6004f7dbfffc509abc906
pkgrel=1
pkgdesc="Minecraft Server Management program"
arch=('i686' 'x86_64')
url="https://gitlab.com/NoahJelen/serverman"
license=('GPL')
depends=('ncurses' 'gcc-libs' 'glibc')
makedepends=('cargo' 'gzip')
source=("git+https://gitlab.com/NoahJelen/serverman")
md5sums=('SKIP')

build() {
    cd serverman
    cargo build --release
    cd target/release
    ln -sf serverman servermancli
    ln -sf serverman servermand
}

package() {
    cd serverman
    mkdir -p "$pkgdir/usr/share/man/man1/"
    mkdir -p "$pkgdir/usr/lib/systemd/user"
    install -Dt "$pkgdir/usr/bin" -m755 target/release/serverman
    install -Dt "$pkgdir/usr/bin" -m755 target/release/servermancli
    install -Dt "$pkgdir/usr/bin" -m755 target/release/servermand
    install -Dt "$pkgdir/usr/share/man/man1" man/servermancli.1
    install -Dt "$pkgdir/usr/share/man/man1" man/servermand.1
    install -Dt "$pkgdir/usr/lib/systemd/user" servermand.service
    gzip "$pkgdir/usr/share/man/man1/servermand.1"
    gzip "$pkgdir/usr/share/man/man1/servermancli.1"
}