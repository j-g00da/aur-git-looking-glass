# Maintainer: Willem Herremans <whpgf at scarlet dot be>
pkgname=postsqlforms
pkgver=1.0.4
pkgrel=2
pkgdesc="A GUI for rapidly building forms and reports for PostgreSQL and SQLite"
arch=('any')
url="https://sourceforge.org/projects/postsqlforms"
license=('GPL2')
depends=('tcl>=8.6.0' 'tk>=8.6.0' 'sqlite-tcl>=3.7.14' 'pgintcl>=3.4.0' )
optdepends=('postgresql>=8.3.0: for using PostSqlForms with PostgreSQL'
            'sqlite>=3.7.14: for using PostSqlForms with SQLite'
            'a2ps: for printing plain text reports'
            'ghostscript: for converting output from a2ps to PDF using ps2pdf'
            'evince: for viewing PDF files generated by ps2pdf')
source=(https://downloads.sourceforge.net/postsqlforms/psf-$pkgver/psf-$pkgver-source.tar.gz
       postsqlforms.conf psf-launch-script psf-postsqlforms.desktop)
md5sums=('41b03e387ec5c70982b929a5d39d846e'
         '6126450aaaf282dd3b68bd136405a2b9'
         'b5956be0f29904ba6e91d8a9bb2b3061'
         '5a21aa73cf20e6a8c30b1f95e2e4fc08')
package() {
  cd $srcdir/psf-$pkgver-source
# /usr/bin
  install -d $pkgdir/usr/bin
  install -m755 $srcdir/psf-launch-script $pkgdir/usr/bin/postsqlforms
# /usr/share/postsqlforms  
  install -d $pkgdir/usr/share/$pkgname
  install -m644 config.tcl $pkgdir/usr/share/$pkgname
  install -m644 database.tcl $pkgdir/usr/share/$pkgname
  install -m644 forms.tcl $pkgdir/usr/share/$pkgname
  install -m644 generic.tcl $pkgdir/usr/share/$pkgname
  install -m644 main.tcl $pkgdir/usr/share/$pkgname
  install -m644 misc.tcl $pkgdir/usr/share/$pkgname
  install -m644 options.tcl $pkgdir/usr/share/$pkgname
  install -m644 parse.tcl $pkgdir/usr/share/$pkgname
  install -m644 postgresql.tcl $pkgdir/usr/share/$pkgname
  install -m644 report.tcl $pkgdir/usr/share/$pkgname
  install -m644 sqlite.tcl $pkgdir/usr/share/$pkgname
  install -m644 sql.tcl $pkgdir/usr/share/$pkgname
# /usr/share/doc/postsqlforms  
  install -d $pkgdir/usr/share/doc/$pkgname
  install -m644 CHANGE_LOG.txt $pkgdir/usr/share/doc/$pkgname
  install -m644 README.txt $pkgdir/usr/share/doc/$pkgname
  install -m644 doc/addressbook.png $pkgdir/usr/share/doc/$pkgname
  install -m644 doc/arrow_down.png $pkgdir/usr/share/doc/$pkgname
  install -m644 doc/arrow_right.png $pkgdir/usr/share/doc/$pkgname
  install -m644 doc/customerdb.png $pkgdir/usr/share/doc/$pkgname
  install -m644 doc/database_window.png $pkgdir/usr/share/doc/$pkgname
  install -m644 doc/form_window.png $pkgdir/usr/share/doc/$pkgname
  install -m644 doc/help.png $pkgdir/usr/share/doc/$pkgname
  install -m644 doc/help-styles.css $pkgdir/usr/share/doc/$pkgname
  install -m644 doc/index.html $pkgdir/usr/share/doc/$pkgname
  install -m644 doc/main_window.png $pkgdir/usr/share/doc/$pkgname
  install -m644 doc/open_form.png $pkgdir/usr/share/doc/$pkgname
  install -m644 doc/options.png $pkgdir/usr/share/doc/$pkgname
  install -m644 doc/print_result.png $pkgdir/usr/share/doc/$pkgname
  install -m644 doc/psf-logo.png $pkgdir/usr/share/doc/$pkgname
  install -m644 doc/schema.png $pkgdir/usr/share/doc/$pkgname
  install -m644 doc/sql_window.png   $pkgdir/usr/share/doc/$pkgname
# /usr/share/doc/en  
  install -d $pkgdir/usr/share/doc/$pkgname/en
  install -m644 doc/en/body.html $pkgdir/usr/share/doc/$pkgname/en
  install -m644 doc/en/contents.html $pkgdir/usr/share/doc/$pkgname/en
  install -m644 doc/en/index.html $pkgdir/usr/share/doc/$pkgname/en
# /usr/share/postsqlforms/examples/postgresql
  install -d $pkgdir/usr/share/$pkgname/examples
  install -d $pkgdir/usr/share/$pkgname/examples/postgresql
  install -m644 examples/postgresql/addressbook.sql $pkgdir/usr/share/$pkgname/examples/postgresql
  install -m644 examples/postgresql/customerdb.sql $pkgdir/usr/share/$pkgname/examples/postgresql
# /usr/share/postsqlforms/examples/sqlite
  install -d $pkgdir/usr/share/$pkgname/examples/sqlite
  install -m644 examples/sqlite/addressbook.sql $pkgdir/usr/share/$pkgname/examples/sqlite
  install -m644 examples/sqlite/customerdb.sql $pkgdir/usr/share/$pkgname/examples/sqlite
# /usr/share/postsqlforms/icons
  install -d $pkgdir/usr/share/$pkgname/icons
  install -m644 icons/arrow_down.xbm $pkgdir/usr/share/$pkgname/icons
  install -m644 icons/arrow_end.xbm $pkgdir/usr/share/$pkgname/icons
  install -m644 icons/arrow_home.xbm $pkgdir/usr/share/$pkgname/icons
  install -m644 icons/arrow_left.xbm $pkgdir/usr/share/$pkgname/icons
  install -m644 icons/arrow_right.xbm $pkgdir/usr/share/$pkgname/icons
  install -m644 icons/arrow_top.xbm $pkgdir/usr/share/$pkgname/icons
  install -m644 icons/arrow_up.xbm $pkgdir/usr/share/$pkgname/icons
  install -m644 icons/empty_5_9.xbm $pkgdir/usr/share/$pkgname/icons
  install -m644 icons/empty_9_5.xbm $pkgdir/usr/share/$pkgname/icons
  install -m644 icons/expand.xbm $pkgdir/usr/share/$pkgname/icons
  install -m644 icons/help.xbm $pkgdir/usr/share/$pkgname/icons
  install -m644 icons/home_dir.xbm $pkgdir/usr/share/$pkgname/icons
  install -m644 icons/psf-icon.png $pkgdir/usr/share/$pkgname/icons
  install -m644 icons/reset.xbm $pkgdir/usr/share/$pkgname/icons
# /usr/share/licenses/postsqlforms
  install -d $pkgdir/usr/share/$pkgname/license
  ln -s /usr/share/licenses/common/GPL2/license.txt $pkgdir/usr/share/$pkgname/license/gpl.txt
# /usr/share/postsqlforms/msgs
  install -d $pkgdir/usr/share/$pkgname/msgs
  install -m644 msgs/ROOT.msg $pkgdir/usr/share/$pkgname/msgs
# /usr/share/postsqlforms/postgresql
  install -d $pkgdir/usr/share/$pkgname/postgresql
  install -m644 postgresql/pfm_tables.sql $pkgdir/usr/share/$pkgname/postgresql
# /usr/share/postsqlforms/sqlite
  install -d $pkgdir/usr/share/$pkgname/sqlite
  install -m644 sqlite/pfm_tables.sql $pkgdir/usr/share/$pkgname/sqlite
# /etc
  install -d $pkgdir/etc
  install -m644 $srcdir/postsqlforms.conf $pkgdir/etc
# /usr/share/applications
  install -d $pkgdir/usr/share/applications
  install -m644 $srcdir/psf-postsqlforms.desktop $pkgdir/usr/share/applications
}
